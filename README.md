## SEHNLAN
利用建立的IMU模型和测量的值构建残差模型
转台的作用就是让a_{x}, a_{y}, a_{z}变成已知的。这样才可以通过最小二乘法得到其余的标定参数。
那么不利用转台的情况下，我们是不知道IMU的理想输出值   的。IMU上电后，我们测量到的值只能是   的。

加速度误差模型【深蓝学院】
不过就算我们不知道理想状态的a_{x}, a_{y}, a_{z}的值，我们还是知道静止状态下重力是[0,0, g]是已知的。那么我们只要将静止状态下的IMU的数据存好，然后利用加速度输入输出模型，利用存储的数据倒推   的数值之后，跟重力做差得到残差函数了。得到残差函数，那么就好办了，就可以通过对内参求偏导后，得到对应的雅克比。有了残差函数和雅克比，就可以利用迭代的方式找出合适的内参（标定参数）。
整体步骤就是参考下面的论文进行的。
https://www.diag.uniroma1.it//~pretto/papers/tpm_icra2014.pdf
​
www.diag.uniroma1.it
加速度计代表定的参数为
   
按照内参定义，加速度的输入与输出的模型如下
   
那么为了通过测量值得到的真实值，变换成下面的形态
   
为了方便求解，将定义一个   
   =   
最终将非常小的项省略之后最终的a等于
   
加速度矢量定义为   ,   为当地重力加速度大小。
当内参完全正确的时候，有   。但是这是不可能的。肯定因为内参的原因会产生误差。所以这个误差就可以当做残差函数   来使用。
那么为了利用高斯牛顿进行迭代优化，需要计算   对\theta^{acc} = [S_{ayx}, S_{azx}, S_{azy}, K_{ax}, K_{ay}, K_{az}, b_{ax}, b_{ay}, b_{az}]的偏导数。
推导
先计算   。
 a\approx\begin{bmatrix}  1, 0, 0 \\ S_{ayx},1,0\\ S_{azx},S_{azy},1  \end{bmatrix} \cdot \begin{bmatrix} K^{'},0,0\\0, K^{'}_{ay}, 0 \\ 0, 0, K^{'}_{az} \end{bmatrix} \cdot \begin{bmatrix} A_{ax}\\A_{ay}\\A_{az} \end{bmatrix} - \begin{bmatrix} b_{ax} \\ b_{ay} \\ b_{az} \end{bmatrix} 
 a\approx  \begin{bmatrix}  K^{'}A_{ax} - b_{ax} \\ S_{ayx}K^{'}A_{ax}+K^{'}_{ay}A_{ay}-b_{ay} \\ S_{azx}K^{'}_{ax}A_{ax}  +S_{azy}K^{'}_{ay}+K^{'}_{az}A_{az}-b_{az} \end{bmatrix} 
 ||a|| = |K^{'}A_{ax} - b_{ax}|+ |S_{ayx}K^{'}A_{ax}+K^{'}_{ay}A_{ay}-b_{ay} |+| S_{azx}K^{'}_{ax}A_{ax}  +S_{azy}K^{'}_{ay}+K^{'}_{az}A_{az}-b_{az}| 
 ||a|| 是一个标量， a 是一个3x1的向量。
利用残差函数求对内参的偏导数。
   
   
因为g其实是一个常量，所以其实  等于0。
那么其实要计算的是   。由链式法则
   
 其中
    
   (因为公式   )
  
那么对于最后   计算偏导
   
   
   的大小为3 x 1,    的大小为3 x 9
最终
    
